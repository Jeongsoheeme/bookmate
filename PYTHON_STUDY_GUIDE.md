# Python λ³µμµ κ°€μ΄λ“ - Bookmate ν”„λ΅μ νΈ

μ΄ ν”„λ΅μ νΈλ¥Ό ν™μ©ν• μ²΄κ³„μ μΈ Python λ³µμµ κ³„νμ…λ‹λ‹¤.

## π“ λ³µμµ λ‹¨κ³„λ³„ κ°€μ΄λ“

### 1λ‹¨κ³„: κΈ°λ³Έ Python λ¬Έλ²• λ³µμµ (1-2μΌ)

#### ν•™μµ ν¬μΈνΈ

- **νƒ€μ… νν…**: `def register(user_data: UserCreate, db: Session = Depends(get_db)) -> User:`
- **λ°μ΄ν„° ν΄λμ¤**: Pydantic λ¨λΈ μ‚¬μ© (`UserCreate`, `UserResponse` λ“±)
- **Enum**: `EventGenre`, `EventSubGenre` λ“±
- **Optional/Union νƒ€μ…**: `Optional[int]`, `str | None`

#### μ‹¤μµ νμΌ

```
backend/app/models/event.py - Enum μ‚¬μ© μμ 
backend/app/schemas/user.py - Pydantic λ¨λΈ μμ 
```

#### λ³µμµ λ°©λ²•

1. κ° λ¨λΈ νμΌμ„ μ½κ³  νƒ€μ… νν…μ΄ μ–΄λ–»κ² μ‚¬μ©λμ—λ”μ§€ λ¶„μ„
2. Enum ν΄λμ¤μ μ‚¬μ©λ²• μ΄ν•΄
3. Optionalκ³Ό Unionμ μ°¨μ΄μ  νμ•…

---

### 2λ‹¨κ³„: κ°μ²΄μ§€ν–¥ ν”„λ΅κ·Έλλ° (OOP) (2-3μΌ)

#### ν•™μµ ν¬μΈνΈ

- **ν΄λμ¤ μƒμ†**: `Base = declarative_base()`, `class User(Base)`
- **ν΄λμ¤ λ©”μ„λ“μ™€ μΈμ¤ν„΄μ¤ λ©”μ„λ“**
- **κ΄€κ³„(Relationship)**: SQLAlchemyμ `relationship()` μ‚¬μ©
- **μ‹±κΈ€ν†¤ ν¨ν„΄**: `redis_service = RedisService()`

#### μ‹¤μµ νμΌ

```
backend/app/models/user.py - ORM λ¨λΈ ν΄λμ¤
backend/app/models/event.py - κ΄€κ³„ μ„¤μ • μμ 
backend/app/services/redis_service.py - ν΄λμ¤ μ„¤κ³„
```

#### λ³µμµ λ°©λ²•

1. κ° λ¨λΈ ν΄λμ¤μ κµ¬μ΅° λ¶„μ„
2. `relationship()`μ΄ μ–΄λ–»κ² μ™Έλν‚¤μ™€ μ—°κ²°λλ”μ§€ μ΄ν•΄
3. RedisService ν΄λμ¤μ λ©”μ„λ“λ“¤μ„ ν•λ‚μ”© λ¶„μ„

---

### 3λ‹¨κ³„: ν•¨μν• ν”„λ΅κ·Έλλ° & κ³ κΈ‰ κΈ°λ¥ (2-3μΌ)

#### ν•™μµ ν¬μΈνΈ

- **λ°μ½”λ μ΄ν„°**: FastAPIμ `@router.post()`, `@router.get()`
- **μμ΅΄μ„± μ£Όμ…**: `Depends(get_db)`, `Depends(get_current_user)`
- **Context Manager**: `with redis_service.lock_seat():`
- **μ λ„λ μ΄ν„°**: `def get_db(): yield db`
- **λλ‹¤ ν•¨μ**: ν•„μ”μ‹ μ‚¬μ©

#### μ‹¤μµ νμΌ

```
backend/app/database.py - μ λ„λ μ΄ν„° ν•¨μ
backend/app/services/redis_service.py - Context Manager κµ¬ν„
backend/app/api/v1/endpoints/users.py - λ°μ½”λ μ΄ν„°μ™€ μμ΅΄μ„± μ£Όμ…
```

#### λ³µμµ λ°©λ²•

1. `get_db()` ν•¨μκ°€ μ λ„λ μ΄ν„°λ΅ κµ¬ν„λ μ΄μ  μ΄ν•΄
2. `lock_seat()`μ Context Manager κµ¬ν„ λ°©μ‹ λ¶„μ„
3. FastAPIμ μμ΅΄μ„± μ£Όμ… μ‹μ¤ν… μ΄ν•΄

---

### 4λ‹¨κ³„: λΉ„λ™κΈ° ν”„λ΅κ·Έλλ° (1-2μΌ)

#### ν•™μµ ν¬μΈνΈ

- **async/await**: `async def root():`
- **λΉ„λ™κΈ° ν•¨μ**: FastAPI μ—”λ“ν¬μΈνΈ
- **λ™κΈ° vs λΉ„λ™κΈ°**: μ–Έμ  μ‚¬μ©ν•λ”μ§€

#### μ‹¤μµ νμΌ

```
backend/app/main.py - async ν•¨μ μμ 
backend/app/api/v1/endpoints/users.py - λΉ„λ™κΈ° μ—”λ“ν¬μΈνΈ
```

#### λ³µμµ λ°©λ²•

1. ν„μ¬ ν”„λ΅μ νΈμ—μ„ asyncκ°€ μ–΄λ–»κ² μ‚¬μ©λλ”μ§€ ν™•μΈ
2. λ™κΈ° ν•¨μμ™€ λΉ„λ™κΈ° ν•¨μμ μ°¨μ΄μ  μ΄ν•΄
3. μ‹¤μ λ΅ λΉ„λ™κΈ°κ°€ ν•„μ”ν• λ¶€λ¶„μΈμ§€ λ¶„μ„

---

### 5λ‹¨κ³„: λ°μ΄ν„°λ² μ΄μ¤ & ORM (3-4μΌ)

#### ν•™μµ ν¬μΈνΈ

- **SQLAlchemy ORM**: λ¨λΈ μ •μ, μΏΌλ¦¬ μ‘μ„±
- **μ„Έμ… κ΄€λ¦¬**: `SessionLocal`, `get_db()`
- **νΈλμ­μ…**: `db.commit()`, `db.rollback()`
- **μΏΌλ¦¬ λ©”μ„λ“**: `.filter()`, `.first()`, `.all()`
- **κ΄€κ³„ μΏΌλ¦¬**: `relationship()` ν™μ©

#### μ‹¤μµ νμΌ

```
backend/app/database.py - λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° μ„¤μ •
backend/app/models/*.py - λ¨λ“  λ¨λΈ νμΌ
backend/app/api/v1/endpoints/*.py - μΏΌλ¦¬ μ‚¬μ© μμ 
```

#### λ³µμµ λ°©λ²•

1. κ° μ—”λ“ν¬μΈνΈμ—μ„ μ‚¬μ©λ μΏΌλ¦¬ ν¨ν„΄ λ¶„μ„
2. JOINμ΄ ν•„μ”ν• κ²½μ° relationship()μΌλ΅ μ–΄λ–»κ² ν•΄κ²°ν–λ”μ§€ ν™•μΈ
3. νΈλμ­μ… μ²λ¦¬κ°€ μ–΄λ–»κ² μ΄λ£¨μ–΄μ§€λ”μ§€ μ΄ν•΄

---

### 6λ‹¨κ³„: μΈμ¦ & λ³΄μ• (2-3μΌ)

#### ν•™μµ ν¬μΈνΈ

- **JWT ν† ν°**: `create_access_token()`, `verify_token()`
- **λΉ„λ°€λ²νΈ ν•΄μ‹±**: `get_password_hash()`, `verify_password()`
- **bcrypt**: λΉ„λ°€λ²νΈ μ•”νΈν™”
- **ν† ν° κ°±μ‹ **: Refresh Token ν¨ν„΄

#### μ‹¤μµ νμΌ

```
backend/app/core/security.py - λ³΄μ• ν•¨μλ“¤
backend/app/api/v1/endpoints/users.py - μΈμ¦ λ΅μ§
backend/app/core/dependencies.py - μΈμ¦ λ―Έλ“¤μ›¨μ–΄
```

#### λ³µμµ λ°©λ²•

1. JWT ν† ν° μƒμ„±κ³Ό κ²€μ¦ κ³Όμ • μ΄ν•΄
2. λΉ„λ°€λ²νΈ ν•΄μ‹± μ•κ³ λ¦¬μ¦ λ¶„μ„ (SHA256 + bcrypt)
3. Refresh Tokenμ λ™μ‘ λ°©μ‹ μ΄ν•΄

---

### 7λ‹¨κ³„: Redis & λ¶„μ‚° μ‹μ¤ν… (2-3μΌ)

#### ν•™μµ ν¬μΈνΈ

- **Redis ν΄λΌμ΄μ–ΈνΈ**: μ—°κ²° λ° κΈ°λ³Έ λ…λ Ήμ–΄
- **λ¶„μ‚° λ½**: `SET NX EX` ν¨ν„΄
- **Lua μ¤ν¬λ¦½νΈ**: μ›μμ  μ—°μ‚°
- **μΊμ‹±**: TTL μ„¤μ •, μΊμ‹ λ¬΄ν¨ν™”
- **Context Manager**: λ¦¬μ†μ¤ κ΄€λ¦¬

#### μ‹¤μµ νμΌ

```
backend/app/services/redis_service.py - Redis μ„λΉ„μ¤ μ „μ²΄
backend/app/api/v1/endpoints/tickets.py - λ½ μ‚¬μ© μμ 
```

#### λ³µμµ λ°©λ²•

1. `lock_seat()`μ Lua μ¤ν¬λ¦½νΈκ°€ μ™ ν•„μ”ν•μ§€ μ΄ν•΄
2. λ¶„μ‚° λ½μ λ™μ‘ μ›λ¦¬ νμ•…
3. μΊμ‹± μ „λµ λ¶„μ„

---

### 8λ‹¨κ³„: νμΌ μ²λ¦¬ & μ—…λ΅λ“ (1-2μΌ)

#### ν•™μµ ν¬μΈνΈ

- **νμΌ μ—…λ΅λ“**: `UploadFile`, `File()`
- **κ²½λ΅ κ΄€λ¦¬**: `os.path`, `os.makedirs()`
- **μ •μ  νμΌ μ„λΉ™**: `StaticFiles`

#### μ‹¤μµ νμΌ

```
backend/app/services/file_upload.py - νμΌ μ—…λ΅λ“ λ΅μ§
backend/app/main.py - StaticFiles μ„¤μ •
backend/app/api/admin/endpoints/events.py - νμΌ μ—…λ΅λ“ μ—”λ“ν¬μΈνΈ
```

#### λ³µμµ λ°©λ²•

1. νμΌ μ—…λ΅λ“ ν”„λ΅μ„Έμ¤ μ΄ν•΄
2. νμΌ μ €μ¥ κ²½λ΅ κ΄€λ¦¬ λ°©μ‹ ν™•μΈ
3. μ •μ  νμΌ μ„λΉ™ μ„¤μ • μ΄ν•΄

---

### 9λ‹¨κ³„: μ—λ¬ μ²λ¦¬ & μμ™Έ (1-2μΌ)

#### ν•™μµ ν¬μΈνΈ

- **HTTPException**: FastAPI μμ™Έ μ²λ¦¬
- **try-except**: μμ™Έ μ²λ¦¬ ν¨ν„΄
- **μƒνƒ μ½”λ“**: HTTP μƒνƒ μ½”λ“ μ‚¬μ©

#### μ‹¤μµ νμΌ

```
backend/app/api/v1/endpoints/users.py - μμ™Έ μ²λ¦¬ μμ 
backend/app/services/redis_service.py - μμ™Έ μ²λ¦¬ ν¨ν„΄
```

#### λ³µμµ λ°©λ²•

1. κ° μ—”λ“ν¬μΈνΈμ μμ™Έ μ²λ¦¬ λ°©μ‹ λ¶„μ„
2. μ μ ν• HTTP μƒνƒ μ½”λ“ μ„ νƒ μ΄μ  μ΄ν•΄
3. μ—λ¬ λ©”μ‹μ§€ μ‘μ„± λ°©λ²• ν•™μµ

---

### 10λ‹¨κ³„: ν”„λ΅μ νΈ κµ¬μ΅° & μ•„ν‚¤ν…μ² (2-3μΌ)

#### ν•™μµ ν¬μΈνΈ

- **λ¨λ“ κµ¬μ΅°**: ν¨ν‚¤μ§€, λ¨λ“ λ¶„λ¦¬
- **μμ΅΄μ„± κ΄€λ¦¬**: `requirements.txt`
- **ν™κ²½ λ³€μ**: `.env` νμΌ, `pydantic-settings`
- **λΌμ°ν„° κµ¬μ΅°**: API λ²„μ „ κ΄€λ¦¬

#### μ‹¤μµ νμΌ

```
backend/app/ - μ „μ²΄ ν”„λ΅μ νΈ κµ¬μ΅°
backend/requirements.txt - μμ΅΄μ„± λ©λ΅
backend/app/core/config.py - μ„¤μ • κ΄€λ¦¬
```

#### λ³µμµ λ°©λ²•

1. ν”„λ΅μ νΈ ν΄λ” κµ¬μ΅°μ μ„¤κ³„ μλ„ νμ•…
2. κ° λ¨λ“μ μ—­ν• κ³Ό μ±…μ„ μ΄ν•΄
3. μ„¤μ • κ΄€λ¦¬ λ°©μ‹ ν•™μµ

---

## π― μ‹¤μ „ μ—°μµ κ³Όμ 

### μ΄κΈ‰ κ³Όμ 

1. **μƒλ΅μ΄ λ¨λΈ μ¶”κ°€**: `Review` λ¨λΈμ„ λ§λ“¤μ–΄ μ΄λ²¤νΈμ— λ€ν• λ¦¬λ·° κΈ°λ¥ μ¶”κ°€
2. **κ°„λ‹¨ν• μ—”λ“ν¬μΈνΈ μ¶”κ°€**: μ΄λ²¤νΈ κ²€μƒ‰ κΈ°λ¥ κµ¬ν„
3. **μ ν‹Έλ¦¬ν‹° ν•¨μ μ‘μ„±**: λ‚ μ§ ν¬λ§·ν…, λ¬Έμμ—΄ κ²€μ¦ λ“±

### μ¤‘κΈ‰ κ³Όμ 

1. **λ³µμ΅ν• μΏΌλ¦¬ μ‘μ„±**: μ—¬λ¬ ν…μ΄λΈ”μ„ JOINν•λ” μΏΌλ¦¬
2. **λ°°μΉ μ‘μ—…**: μ •κΈ°μ μΌλ΅ μ‹¤ν–‰λλ” μ‘μ—… (μ: λ§λ£λ μΆμ„ λ½ ν•΄μ )
3. **λ΅κΉ… μ‹μ¤ν…**: λ΅κ·Έ νμΌ κ΄€λ¦¬

### κ³ κΈ‰ κ³Όμ 

1. **μ„±λ¥ μµμ ν™”**: μΏΌλ¦¬ μµμ ν™”, μΈλ±μ¤ μ¶”κ°€
2. **ν…μ¤νΈ μ½”λ“ μ‘μ„±**: pytestλ¥Ό μ‚¬μ©ν• λ‹¨μ„ ν…μ¤νΈ
3. **API λ¬Έμ„ν™”**: Swagger UI μ»¤μ¤ν„°λ§μ΄μ§•

---

## π“– ν•™μµ μλ£ μ¶”μ²

### κ³µμ‹ λ¬Έμ„

- [FastAPI κ³µμ‹ λ¬Έμ„](https://fastapi.tiangolo.com/)
- [SQLAlchemy κ³µμ‹ λ¬Έμ„](https://docs.sqlalchemy.org/)
- [Pydantic κ³µμ‹ λ¬Έμ„](https://docs.pydantic.dev/)
- [Redis Python ν΄λΌμ΄μ–ΈνΈ](https://redis-py.readthedocs.io/)

### κ°λ… ν•™μµ

- Python νƒ€μ… νν…: PEP 484, PEP 526
- Context Manager: `__enter__`, `__exit__`
- μ λ„λ μ΄ν„°: `yield` ν‚¤μ›λ“
- λ°μ½”λ μ΄ν„° ν¨ν„΄

---

## π” μ½”λ“ λ¶„μ„ μ²΄ν¬λ¦¬μ¤νΈ

κ° νμΌμ„ μ½μ„ λ• λ‹¤μμ„ ν™•μΈν•μ„Έμ”:

- [ ] νƒ€μ… νν…μ΄ μ μ ν μ‚¬μ©λμ—λ”κ°€?
- [ ] ν•¨μμ μ—­ν• μ΄ λ…ν™•ν•κ°€?
- [ ] μ—λ¬ μ²λ¦¬κ°€ μ μ ν•κ°€?
- [ ] μ½”λ“κ°€ μ¬μ‚¬μ© κ°€λ¥ν•κ°€?
- [ ] μ£Όμ„μ΄ ν•„μ”ν• λ¶€λ¶„μ— μ£Όμ„μ΄ μλ”κ°€?
- [ ] λ„¤μ΄λ°μ΄ λ…ν™•ν•κ°€?

---

## π’΅ ν•™μµ ν

1. **ν• λ²μ— ν•λ‚μ”©**: ν• λ²μ— λ¨λ“  κ²ƒμ„ μ΄ν•΄ν•λ ¤ ν•μ§€ λ§κ³ , ν•λ‚μ”© κΉμ΄ μκ² ν•™μµ
2. **μ‹¤ν–‰ν•΄λ³΄κΈ°**: μ½”λ“λ¥Ό μ½κΈ°λ§ ν•μ§€ λ§κ³ , μ‹¤μ λ΅ μ‹¤ν–‰ν•΄λ³΄κ³  μμ •ν•΄λ³΄κΈ°
3. **μ§λ¬Έν•κΈ°**: "μ™ μ΄λ ‡κ² κµ¬ν„ν–μ„κΉ?" μ¤μ¤λ΅ μ§λ¬Έν•κ³  λ‹µ μ°ΎκΈ°
4. **λΉ„κµν•κΈ°**: λ‹¤λ¥Έ ν”„λ΅μ νΈλ‚ λ¬Έμ„μ™€ λΉ„κµν•λ©° ν•™μµ
5. **κΈ°λ΅ν•κΈ°**: ν•™μµν• λ‚΄μ©μ„ λΈ”λ΅κ·Έλ‚ λ…ΈνΈμ— μ •λ¦¬

---

## π“ ν•™μµ μΌμ§€ μ‘μ„± μμ‹

```markdown
## 2024λ…„ Xμ›” XμΌ

### ν•™μµ λ‚΄μ©

- SQLAlchemy relationship() μ‚¬μ©λ²•
- JWT ν† ν° μƒμ„± λ° κ²€μ¦

### μ΄ν•΄ν• μ 

- relationship()μ€ μ‹¤μ  JOINμ„ μλ™μΌλ΅ μ²λ¦¬ν•΄μ¤€λ‹¤
- JWTλ” ν—¤λ”, νμ΄λ΅λ“, μ„λ…μΌλ΅ κµ¬μ„±λλ‹¤

### κ¶κΈν• μ 

- relationship()μ lazy loading vs eager loading μ°¨μ΄
- Refresh Tokenμ„ DBμ— μ €μ¥ν•λ” μ΄μ 

### λ‹¤μ ν•™μµ κ³„ν

- Redis λ¶„μ‚° λ½ κµ¬ν„ λ°©μ‹ μ΄ν•΄
```

---

## π€ μ‹μ‘ν•κΈ°

1. **1λ‹¨κ³„λ¶€ν„° μ°¨κ·Όμ°¨κ·Ό**: μ„μ λ‹¨κ³„λ¥Ό μμ„λ€λ΅ λ”°λΌκ°€μ„Έμ”
2. **μ½”λ“ μ½κΈ°**: κ° νμΌμ„ μ—΄μ–΄μ„ μ½”λ“λ¥Ό μ½κ³  μ΄ν•΄ν•μ„Έμ”
3. **μ‹¤μµν•κΈ°**: μ΄ν•΄ν• λ‚΄μ©μ„ λ°”νƒ•μΌλ΅ μ‘μ€ κΈ°λ¥μ„ μ¶”κ°€ν•΄λ³΄μ„Έμ”
4. **μ§λ¬Έν•κΈ°**: λ¨λ¥΄λ” λ¶€λ¶„μ€ λ¬Έμ„λ¥Ό μ°Ύμ•„λ³΄κ±°λ‚ μ§λ¬Έν•μ„Έμ”

ν–‰μ΄μ„ λΉ•λ‹λ‹¤! π‰
